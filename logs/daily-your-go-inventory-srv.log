2025-06-19 19:18:21.940	[34mINFO[0m	app/app.go:102	start server
2025-06-19 19:18:21.940	[34mINFO[0m	rpcserver/server.go:177	[grpc] server listening on: 192.168.5.52:8018
2025-06-20 17:38:47.981	[34mINFO[0m	app/app.go:102	start server
2025-06-20 17:38:47.982	[34mINFO[0m	rpcserver/server.go:177	[grpc] server listening on: 192.168.5.52:8018
2025-06-20 17:56:56.579	[31mERROR[0m	serverinterceptors/crashinterceptor.go:22	unimplemented

goroutine 618 [running]:
runtime/debug.Stack()
	/root/.g/go/src/runtime/debug/stack.go:26 +0x5e
github.com/WeiXinao/daily_your_go/gmicro/server/rpcserver/serverinterceptors.UnaryCrashInterceptor.func1({0x10f5960, 0x14e03f0})
	/root/repos/github.com/WeiXinao/daily_your_go/gmicro/server/rpcserver/serverinterceptors/crashinterceptor.go:22 +0x1d
github.com/WeiXinao/daily_your_go/gmicro/server/rpcserver/serverinterceptors.handleCrash(0x13a5e88)
	/root/repos/github.com/WeiXinao/daily_your_go/gmicro/server/rpcserver/serverinterceptors/crashinterceptor.go:30 +0x34
panic({0x10f5960?, 0x14e03f0?})
	/root/.g/go/src/runtime/panic.go:791 +0x132
go.opentelemetry.io/otel/sdk/trace.(*recordingSpan).End.deferwrap1()
	/root/go/pkg/mod/go.opentelemetry.io/otel/sdk@v1.36.0/trace/span.go:467 +0x25
go.opentelemetry.io/otel/sdk/trace.(*recordingSpan).End(0xc00001e000, {0x0, 0x0, 0xc0003f0000?})
	/root/go/pkg/mod/go.opentelemetry.io/otel/sdk@v1.36.0/trace/span.go:506 +0xb7b
panic({0x10f5960?, 0x14e03f0?})
	/root/.g/go/src/runtime/panic.go:791 +0x132
github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/service/v1.(*service).Inventory(0x0?)
	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/service/v1/service.go:27 +0x25
github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/controller/v1.(*inventoryServer).Sell(0xc00024e180, {0x14f3330, 0xc00026faa0}, 0xc000412c30)
	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/controller/v1/inventory.go:51 +0x102
github.com/WeiXinao/daily_your_go/api/inventory/v1._Inventory_Sell_Handler.func1({0x14f3330?, 0xc00026faa0?}, {0x123d380?, 0xc000412c30?})
	/root/repos/github.com/WeiXinao/daily_your_go/api/inventory/v1/inventory_grpc.pb.go:191 +0xcb
go.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc.UnaryServerInterceptor.func1({0x14f3330, 0xc00026ec90}, {0x123d380, 0xc000412c30}, 0xc0005825c0, 0xc000588270)
	/root/go/pkg/mod/go.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc@v0.54.0/interceptor.go:316 +0x592
google.golang.org/grpc.getChainUnaryHandler.func1({0x14f3330, 0xc00026ec90}, {0x123d380, 0xc000412c30})
	/root/go/pkg/mod/google.golang.org/grpc@v1.72.1/server.go:1217 +0xb2
github.com/WeiXinao/daily_your_go/gmicro/server/rpcserver/serverinterceptors.UnaryCrashInterceptor({0x14f3330?, 0xc00026ec90?}, {0x123d380?, 0xc000412c30?}, 0xc0005825c0?, 0xc000588270?)
	/root/repos/github.com/WeiXinao/daily_your_go/gmicro/server/rpcserver/serverinterceptors/crashinterceptor.go:25 +0x73
google.golang.org/grpc.NewServer.chainUnaryServerInterceptors.chainUnaryInterceptors.func1({0x14f3330, 0xc00026ec90}, {0x123d380, 0xc000412c30}, 0xc0005825c0, 0x80?)
	/root/go/pkg/mod/google.golang.org/grpc@v1.72.1/server.go:1208 +0x85
github.com/WeiXinao/daily_your_go/api/inventory/v1._Inventory_Sell_Handler({0x120aaa0, 0xc00024e180}, {0x14f3330, 0xc00026ec90}, 0xc0002b2080, 0xc000512280)
	/root/repos/github.com/WeiXinao/daily_your_go/api/inventory/v1/inventory_grpc.pb.go:193 +0x143
google.golang.org/grpc.(*Server).processUnaryRPC(0xc0001ccc00, {0x14f3330, 0xc00026eb70}, 0xc00051c480, 0xc00011efc0, 0x1df0e70, 0x0)
	/root/go/pkg/mod/google.golang.org/grpc@v1.72.1/server.go:1405 +0x103b
google.golang.org/grpc.(*Server).handleStream(0xc0001ccc00, {0x14f3cd0, 0xc00018a1a0}, 0xc00051c480)
	/root/go/pkg/mod/google.golang.org/grpc@v1.72.1/server.go:1815 +0xbaa
google.golang.org/grpc.(*Server).serveStreams.func2.1()
	/root/go/pkg/mod/google.golang.org/grpc@v1.72.1/server.go:1035 +0x7f
created by google.golang.org/grpc.(*Server).serveStreams.func2 in goroutine 617
	/root/go/pkg/mod/google.golang.org/grpc@v1.72.1/server.go:1046 +0x125

2025-06-20 17:58:56.294	[34mINFO[0m	app/app.go:150	start deregister service
2025-06-20 17:58:56.312	[34mINFO[0m	app/app.go:161	start cancel context
2025-06-20 17:58:56.313	[34mINFO[0m	rpcserver/server.go:186	[grpc] server stopped
2025-06-20 17:58:59.472	[34mINFO[0m	app/app.go:102	start server
2025-06-20 17:58:59.472	[34mINFO[0m	rpcserver/server.go:177	[grpc] server listening on: 192.168.5.52:8018
2025-06-20 18:00:41.171	[34mINFO[0m	v1/inventory.go:143	订单扣减库存
2025-06-20 18:00:41.271	[34mINFO[0m	gormx/gmicro_logger.go:86	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:96 Error 1146 (42S02): Table 'mxshop_goods_srv.inventory' doesn't exist
[57.554ms] [rows:0] SELECT * FROM `inventory` WHERE goods = 421 AND `inventory`.`deleted_at` IS NULL ORDER BY `inventory`.`id` LIMIT 1
2025-06-20 18:00:41.271	[31mERROR[0m	db/inventory.go:98	get inv err: Error 1146 (42S02): Table 'mxshop_goods_srv.inventory' doesn't exist
2025-06-20 18:00:41.272	[31mERROR[0m	v1/inventory.go:171	订单获取库存失败
2025-06-20 18:01:03.905	[34mINFO[0m	v1/inventory.go:143	订单扣减库存
2025-06-20 18:01:03.952	[34mINFO[0m	gormx/gmicro_logger.go:86	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:96 Error 1146 (42S02): Table 'mxshop_goods_srv.inventory' doesn't exist
[38.843ms] [rows:0] SELECT * FROM `inventory` WHERE goods = 421 AND `inventory`.`deleted_at` IS NULL ORDER BY `inventory`.`id` LIMIT 1
2025-06-20 18:01:03.953	[31mERROR[0m	db/inventory.go:98	get inv err: Error 1146 (42S02): Table 'mxshop_goods_srv.inventory' doesn't exist
2025-06-20 18:01:03.953	[31mERROR[0m	v1/inventory.go:171	订单获取库存失败
2025-06-20 18:01:44.500	[34mINFO[0m	v1/inventory.go:143	订单扣减库存
2025-06-20 18:01:44.528	[34mINFO[0m	gormx/gmicro_logger.go:86	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:96 Error 1146 (42S02): Table 'mxshop_goods_srv.inventory' doesn't exist
[17.354ms] [rows:0] SELECT * FROM `inventory` WHERE goods = 421 AND `inventory`.`deleted_at` IS NULL ORDER BY `inventory`.`id` LIMIT 1
2025-06-20 18:01:44.528	[31mERROR[0m	db/inventory.go:98	get inv err: Error 1146 (42S02): Table 'mxshop_goods_srv.inventory' doesn't exist
2025-06-20 18:01:44.528	[31mERROR[0m	v1/inventory.go:171	订单获取库存失败
2025-06-20 18:03:05.760	[34mINFO[0m	v1/inventory.go:143	订单扣减库存
2025-06-20 18:03:05.781	[34mINFO[0m	gormx/gmicro_logger.go:86	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:96 Error 1146 (42S02): Table 'mxshop_goods_srv.inventory' doesn't exist
[12.829ms] [rows:0] SELECT * FROM `inventory` WHERE goods = 421 AND `inventory`.`deleted_at` IS NULL ORDER BY `inventory`.`id` LIMIT 1
2025-06-20 18:03:05.781	[31mERROR[0m	db/inventory.go:98	get inv err: Error 1146 (42S02): Table 'mxshop_goods_srv.inventory' doesn't exist
2025-06-20 18:03:05.781	[31mERROR[0m	v1/inventory.go:171	订单获取库存失败
2025-06-20 18:03:59.458	[34mINFO[0m	app/app.go:150	start deregister service
2025-06-20 18:03:59.467	[34mINFO[0m	app/app.go:161	start cancel context
2025-06-20 18:03:59.470	[34mINFO[0m	rpcserver/server.go:186	[grpc] server stopped
2025-06-20 18:04:03.864	[34mINFO[0m	app/app.go:102	start server
2025-06-20 18:04:03.864	[34mINFO[0m	rpcserver/server.go:177	[grpc] server listening on: 192.168.5.52:8018
2025-06-20 18:04:13.259	[34mINFO[0m	v1/inventory.go:143	订单扣减库存
2025-06-20 18:04:13.278	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:96
[17.245ms] [rows:1] SELECT * FROM `inventory` WHERE goods = 421 AND `inventory`.`deleted_at` IS NULL ORDER BY `inventory`.`id` LIMIT 1
2025-06-20 18:04:13.287	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:60
[8.592ms] [rows:1] UPDATE `inventory` SET `stocks`=stocks - 2 WHERE goods=421 AND stocks >= 2 AND `inventory`.`deleted_at` IS NULL
2025-06-20 18:04:13.361	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:78
[66.294ms] [rows:1] INSERT INTO `stockselldetail` (`order_sn`,`status`,`detail`) VALUES ('',1,'[{"Goods":421,"Num":2}]')
2025-06-20 18:05:47.483	[34mINFO[0m	v1/inventory.go:143	订单扣减库存
2025-06-20 18:05:47.504	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:96
[13.136ms] [rows:1] SELECT * FROM `inventory` WHERE goods = 421 AND `inventory`.`deleted_at` IS NULL ORDER BY `inventory`.`id` LIMIT 1
2025-06-20 18:05:47.508	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:60
[2.891ms] [rows:1] UPDATE `inventory` SET `stocks`=stocks - 2 WHERE goods=421 AND stocks >= 2 AND `inventory`.`deleted_at` IS NULL
2025-06-20 18:05:47.518	[34mINFO[0m	gormx/gmicro_logger.go:86	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:78 Error 1062 (23000): Duplicate entry '' for key 'stockselldetail.idx_order_sn'
[9.773ms] [rows:0] INSERT INTO `stockselldetail` (`order_sn`,`status`,`detail`) VALUES ('',1,'[{"Goods":421,"Num":2}]')
2025-06-20 18:05:47.523	[31mERROR[0m	v1/inventory.go:200	订单创建库存扣减记录失败
2025-06-20 18:11:09.792	[34mINFO[0m	v1/inventory.go:143	订单扣减库存
2025-06-20 18:11:09.843	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:96
[17.001ms] [rows:1] SELECT * FROM `inventory` WHERE goods = 421 AND `inventory`.`deleted_at` IS NULL ORDER BY `inventory`.`id` LIMIT 1
2025-06-20 18:11:09.845	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:60
[1.863ms] [rows:1] UPDATE `inventory` SET `stocks`=stocks - 2 WHERE goods=421 AND stocks >= 2 AND `inventory`.`deleted_at` IS NULL
2025-06-20 18:11:09.854	[34mINFO[0m	gormx/gmicro_logger.go:86	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:78 Error 1062 (23000): Duplicate entry '' for key 'stockselldetail.idx_order_sn'
[5.925ms] [rows:0] INSERT INTO `stockselldetail` (`order_sn`,`status`,`detail`) VALUES ('',1,'[{"Goods":421,"Num":2}]')
2025-06-20 18:11:09.859	[31mERROR[0m	v1/inventory.go:200	订单创建库存扣减记录失败
2025-06-20 18:13:14.759	[34mINFO[0m	app/app.go:150	start deregister service
2025-06-20 18:13:14.771	[34mINFO[0m	app/app.go:161	start cancel context
2025-06-20 18:13:14.774	[34mINFO[0m	rpcserver/server.go:186	[grpc] server stopped
2025-06-20 18:13:19.246	[34mINFO[0m	app/app.go:102	start server
2025-06-20 18:13:19.246	[34mINFO[0m	rpcserver/server.go:177	[grpc] server listening on: 192.168.5.52:8018
2025-06-20 18:13:25.812	[34mINFO[0m	v1/inventory.go:143	订单扣减库存
2025-06-20 18:13:25.841	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:96
[23.002ms] [rows:1] SELECT * FROM `inventory` WHERE goods = 421 AND `inventory`.`deleted_at` IS NULL ORDER BY `inventory`.`id` LIMIT 1
2025-06-20 18:13:25.848	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:60
[6.829ms] [rows:1] UPDATE `inventory` SET `stocks`=stocks - 2 WHERE goods=421 AND stocks >= 2 AND `inventory`.`deleted_at` IS NULL
2025-06-20 18:13:25.859	[34mINFO[0m	gormx/gmicro_logger.go:86	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:78 Error 1062 (23000): Duplicate entry '' for key 'stockselldetail.idx_order_sn'
[7.822ms] [rows:0] INSERT INTO `stockselldetail` (`order_sn`,`status`,`detail`) VALUES ('',1,'[{"Goods":421,"Num":2}]')
2025-06-20 18:13:25.866	[31mERROR[0m	v1/inventory.go:200	订单创建库存扣减记录失败
2025-06-20 18:13:46.550	[34mINFO[0m	v1/inventory.go:143	订单扣减库存
2025-06-20 18:13:46.569	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:96
[9.760ms] [rows:1] SELECT * FROM `inventory` WHERE goods = 421 AND `inventory`.`deleted_at` IS NULL ORDER BY `inventory`.`id` LIMIT 1
2025-06-20 18:13:46.573	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:60
[3.730ms] [rows:1] UPDATE `inventory` SET `stocks`=stocks - 2 WHERE goods=421 AND stocks >= 2 AND `inventory`.`deleted_at` IS NULL
2025-06-20 18:13:46.579	[34mINFO[0m	gormx/gmicro_logger.go:86	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:78 Error 1062 (23000): Duplicate entry '' for key 'stockselldetail.idx_order_sn'
[5.653ms] [rows:0] INSERT INTO `stockselldetail` (`order_sn`,`status`,`detail`) VALUES ('',1,'[{"Goods":421,"Num":2}]')
2025-06-20 18:13:46.587	[31mERROR[0m	v1/inventory.go:200	订单创建库存扣减记录失败
2025-06-20 18:14:29.511	[34mINFO[0m	v1/inventory.go:143	订单扣减库存
2025-06-20 18:14:29.531	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:96
[11.893ms] [rows:1] SELECT * FROM `inventory` WHERE goods = 421 AND `inventory`.`deleted_at` IS NULL ORDER BY `inventory`.`id` LIMIT 1
2025-06-20 18:14:29.534	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:60
[2.401ms] [rows:1] UPDATE `inventory` SET `stocks`=stocks - 2 WHERE goods=421 AND stocks >= 2 AND `inventory`.`deleted_at` IS NULL
2025-06-20 18:14:29.539	[34mINFO[0m	gormx/gmicro_logger.go:86	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:78 Error 1062 (23000): Duplicate entry '' for key 'stockselldetail.idx_order_sn'
[5.163ms] [rows:0] INSERT INTO `stockselldetail` (`order_sn`,`status`,`detail`) VALUES ('',1,'[{"Goods":421,"Num":2}]')
2025-06-20 18:14:29.543	[31mERROR[0m	v1/inventory.go:200	订单创建库存扣减记录失败
2025-06-20 18:15:51.345	[34mINFO[0m	v1/inventory.go:143	订单扣减库存
2025-06-20 18:15:51.365	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:96
[11.276ms] [rows:1] SELECT * FROM `inventory` WHERE goods = 421 AND `inventory`.`deleted_at` IS NULL ORDER BY `inventory`.`id` LIMIT 1
2025-06-20 18:15:51.368	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:60
[2.477ms] [rows:1] UPDATE `inventory` SET `stocks`=stocks - 2 WHERE goods=421 AND stocks >= 2 AND `inventory`.`deleted_at` IS NULL
2025-06-20 18:15:51.374	[34mINFO[0m	gormx/gmicro_logger.go:86	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:78 Error 1062 (23000): Duplicate entry '' for key 'stockselldetail.idx_order_sn'
[5.163ms] [rows:0] INSERT INTO `stockselldetail` (`order_sn`,`status`,`detail`) VALUES ('',1,'[{"Goods":421,"Num":2}]')
2025-06-20 18:15:51.379	[31mERROR[0m	v1/inventory.go:200	订单创建库存扣减记录失败
2025-06-20 18:16:18.188	[34mINFO[0m	v1/inventory.go:143	订单7eS2a2boRiwM4LPpei6xJe扣减库存
2025-06-20 18:16:18.218	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:96
[15.804ms] [rows:1] SELECT * FROM `inventory` WHERE goods = 421 AND `inventory`.`deleted_at` IS NULL ORDER BY `inventory`.`id` LIMIT 1
2025-06-20 18:16:18.223	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:60
[4.176ms] [rows:1] UPDATE `inventory` SET `stocks`=stocks - 2 WHERE goods=421 AND stocks >= 2 AND `inventory`.`deleted_at` IS NULL
2025-06-20 18:16:18.227	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:78
[3.591ms] [rows:1] INSERT INTO `stockselldetail` (`order_sn`,`status`,`detail`) VALUES ('7eS2a2boRiwM4LPpei6xJe',1,'[{"Goods":421,"Num":2}]')
2025-06-20 18:16:18.240	[31mERROR[0m	serverinterceptors/crashinterceptor.go:22	runtime error: invalid memory address or nil pointer dereference

goroutine 212 [running]:
runtime/debug.Stack()
	/root/.g/go/src/runtime/debug/stack.go:26 +0x5e
github.com/WeiXinao/daily_your_go/gmicro/server/rpcserver/serverinterceptors.UnaryCrashInterceptor.func1({0x1179520, 0x1dd3530})
	/root/repos/github.com/WeiXinao/daily_your_go/gmicro/server/rpcserver/serverinterceptors/crashinterceptor.go:22 +0x1d
github.com/WeiXinao/daily_your_go/gmicro/server/rpcserver/serverinterceptors.handleCrash(0x13a71c8)
	/root/repos/github.com/WeiXinao/daily_your_go/gmicro/server/rpcserver/serverinterceptors/crashinterceptor.go:30 +0x34
panic({0x1179520?, 0x1dd3530?})
	/root/.g/go/src/runtime/panic.go:791 +0x132
go.opentelemetry.io/otel/sdk/trace.(*recordingSpan).End.deferwrap1()
	/root/go/pkg/mod/go.opentelemetry.io/otel/sdk@v1.36.0/trace/span.go:467 +0x25
go.opentelemetry.io/otel/sdk/trace.(*recordingSpan).End(0xc00023b2c0, {0x0, 0x0, 0xc000584a80?})
	/root/go/pkg/mod/go.opentelemetry.io/otel/sdk@v1.36.0/trace/span.go:506 +0xb7b
panic({0x1179520?, 0x1dd3530?})
	/root/.g/go/src/runtime/panic.go:791 +0x132
github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/controller/v1.(*inventoryServer).Sell(0xc00050c8b0, {0x14f4930, 0xc000665530}, 0xc00040cf00)
	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/controller/v1/inventory.go:59 +0x1ab
github.com/WeiXinao/daily_your_go/api/inventory/v1._Inventory_Sell_Handler.func1({0x14f4930?, 0xc000665530?}, {0x123e4e0?, 0xc00040cf00?})
	/root/repos/github.com/WeiXinao/daily_your_go/api/inventory/v1/inventory_grpc.pb.go:191 +0xcb
go.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc.UnaryServerInterceptor.func1({0x14f4930, 0xc000665440}, {0x123e4e0, 0xc00040cf00}, 0xc000346a00, 0xc000142ca8)
	/root/go/pkg/mod/go.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc@v0.54.0/interceptor.go:316 +0x592
google.golang.org/grpc.getChainUnaryHandler.func1({0x14f4930, 0xc000665440}, {0x123e4e0, 0xc00040cf00})
	/root/go/pkg/mod/google.golang.org/grpc@v1.72.1/server.go:1217 +0xb2
github.com/WeiXinao/daily_your_go/gmicro/server/rpcserver/serverinterceptors.UnaryCrashInterceptor({0x14f4930?, 0xc000665440?}, {0x123e4e0?, 0xc00040cf00?}, 0xc000346a00?, 0xc000142ca8?)
	/root/repos/github.com/WeiXinao/daily_your_go/gmicro/server/rpcserver/serverinterceptors/crashinterceptor.go:25 +0x73
google.golang.org/grpc.NewServer.chainUnaryServerInterceptors.chainUnaryInterceptors.func1({0x14f4930, 0xc000665440}, {0x123e4e0, 0xc00040cf00}, 0xc000346a00, 0x80?)
	/root/go/pkg/mod/google.golang.org/grpc@v1.72.1/server.go:1208 +0x85
github.com/WeiXinao/daily_your_go/api/inventory/v1._Inventory_Sell_Handler({0x120bc00, 0xc00050c8b0}, {0x14f4930, 0xc000665440}, 0xc00036e680, 0xc0000aaa60)
	/root/repos/github.com/WeiXinao/daily_your_go/api/inventory/v1/inventory_grpc.pb.go:193 +0x143
google.golang.org/grpc.(*Server).processUnaryRPC(0xc0000fa200, {0x14f4930, 0xc0006653b0}, 0xc00040a900, 0xc000596e10, 0x1df2e70, 0x0)
	/root/go/pkg/mod/google.golang.org/grpc@v1.72.1/server.go:1405 +0x103b
google.golang.org/grpc.(*Server).handleStream(0xc0000fa200, {0x14f52d0, 0xc0003f8000}, 0xc00040a900)
	/root/go/pkg/mod/google.golang.org/grpc@v1.72.1/server.go:1815 +0xbaa
google.golang.org/grpc.(*Server).serveStreams.func2.1()
	/root/go/pkg/mod/google.golang.org/grpc@v1.72.1/server.go:1035 +0x7f
created by google.golang.org/grpc.(*Server).serveStreams.func2 in goroutine 30
	/root/go/pkg/mod/google.golang.org/grpc@v1.72.1/server.go:1046 +0x125

2025-06-20 18:18:33.273	[34mINFO[0m	v1/inventory.go:143	订单扣减库存
2025-06-20 18:18:33.291	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:96
[9.191ms] [rows:1] SELECT * FROM `inventory` WHERE goods = 421 AND `inventory`.`deleted_at` IS NULL ORDER BY `inventory`.`id` LIMIT 1
2025-06-20 18:18:33.293	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:60
[1.701ms] [rows:1] UPDATE `inventory` SET `stocks`=stocks - 2 WHERE goods=421 AND stocks >= 2 AND `inventory`.`deleted_at` IS NULL
2025-06-20 18:18:33.299	[34mINFO[0m	gormx/gmicro_logger.go:86	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:78 Error 1062 (23000): Duplicate entry '' for key 'stockselldetail.idx_order_sn'
[4.832ms] [rows:0] INSERT INTO `stockselldetail` (`order_sn`,`status`,`detail`) VALUES ('',1,'[{"Goods":421,"Num":2}]')
2025-06-20 18:18:33.305	[31mERROR[0m	v1/inventory.go:200	订单创建库存扣减记录失败
2025-06-20 18:20:05.501	[34mINFO[0m	app/app.go:150	start deregister service
2025-06-20 18:20:05.511	[34mINFO[0m	app/app.go:161	start cancel context
2025-06-20 18:20:05.513	[34mINFO[0m	rpcserver/server.go:186	[grpc] server stopped
2025-06-20 18:20:17.262	[34mINFO[0m	app/app.go:102	start server
2025-06-20 18:20:17.263	[34mINFO[0m	rpcserver/server.go:177	[grpc] server listening on: 192.168.5.52:8018
2025-06-20 18:20:22.294	[34mINFO[0m	v1/inventory.go:143	订单rH24T5mAzetkExQ95xzhPL扣减库存
2025-06-20 18:20:22.309	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:96
[12.363ms] [rows:1] SELECT * FROM `inventory` WHERE goods = 421 AND `inventory`.`deleted_at` IS NULL ORDER BY `inventory`.`id` LIMIT 1
2025-06-20 18:20:22.313	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:60
[3.419ms] [rows:1] UPDATE `inventory` SET `stocks`=stocks - 2 WHERE goods=421 AND stocks >= 2 AND `inventory`.`deleted_at` IS NULL
2025-06-20 18:20:22.317	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:78
[2.897ms] [rows:1] INSERT INTO `stockselldetail` (`order_sn`,`status`,`detail`) VALUES ('rH24T5mAzetkExQ95xzhPL',1,'[{"Goods":421,"Num":2}]')
2025-06-20 18:20:22.347	[34mINFO[0m	v1/inventory.go:64	订单rH24T5mAzetkExQ95xzhPL归还库存
2025-06-20 18:20:22.347	[34mINFO[0m	v1/inventory.go:60	订单rH24T5mAzetkExQ95xzhPL归还库存
2025-06-20 18:20:22.351	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:45
[2.555ms] [rows:1] SELECT * FROM `stockselldetail` WHERE order_sn = 'rH24T5mAzetkExQ95xzhPL' ORDER BY `stockselldetail`.`order_sn` LIMIT 1
2025-06-20 18:20:22.351	[34mINFO[0m	v1/inventory.go:96	订单rH24T5mAzetkExQ95xzhPL库存记录已经归还，忽略
2025-06-20 18:21:52.485	[34mINFO[0m	v1/inventory.go:143	订单扣减库存
2025-06-20 18:21:52.506	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:96
[10.276ms] [rows:1] SELECT * FROM `inventory` WHERE goods = 421 AND `inventory`.`deleted_at` IS NULL ORDER BY `inventory`.`id` LIMIT 1
2025-06-20 18:21:52.508	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:60
[2.117ms] [rows:1] UPDATE `inventory` SET `stocks`=stocks - 2 WHERE goods=421 AND stocks >= 2 AND `inventory`.`deleted_at` IS NULL
2025-06-20 18:21:52.512	[34mINFO[0m	gormx/gmicro_logger.go:86	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:78 Error 1062 (23000): Duplicate entry '' for key 'stockselldetail.idx_order_sn'
[3.672ms] [rows:0] INSERT INTO `stockselldetail` (`order_sn`,`status`,`detail`) VALUES ('',1,'[{"Goods":421,"Num":2}]')
2025-06-20 18:21:52.518	[31mERROR[0m	v1/inventory.go:200	订单创建库存扣减记录失败
2025-06-20 18:23:54.340	[34mINFO[0m	v1/inventory.go:143	订单扣减库存
2025-06-20 18:23:54.357	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:96
[10.045ms] [rows:1] SELECT * FROM `inventory` WHERE goods = 421 AND `inventory`.`deleted_at` IS NULL ORDER BY `inventory`.`id` LIMIT 1
2025-06-20 18:23:54.360	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:60
[2.518ms] [rows:1] UPDATE `inventory` SET `stocks`=stocks - 2 WHERE goods=421 AND stocks >= 2 AND `inventory`.`deleted_at` IS NULL
2025-06-20 18:23:54.364	[34mINFO[0m	gormx/gmicro_logger.go:86	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:78 Error 1062 (23000): Duplicate entry '' for key 'stockselldetail.idx_order_sn'
[3.932ms] [rows:0] INSERT INTO `stockselldetail` (`order_sn`,`status`,`detail`) VALUES ('',1,'[{"Goods":421,"Num":2}]')
2025-06-20 18:23:54.369	[31mERROR[0m	v1/inventory.go:200	订单创建库存扣减记录失败
2025-06-20 18:30:11.921	[34mINFO[0m	app/app.go:150	start deregister service
2025-06-20 18:30:11.944	[34mINFO[0m	app/app.go:161	start cancel context
2025-06-20 18:30:11.958	[34mINFO[0m	rpcserver/server.go:186	[grpc] server stopped
2025-06-20 18:30:17.418	[34mINFO[0m	app/app.go:102	start server
2025-06-20 18:30:17.418	[34mINFO[0m	rpcserver/server.go:177	[grpc] server listening on: 192.168.5.52:8018
2025-06-20 18:31:03.385	[34mINFO[0m	v1/inventory.go:143	订单VrkJEC2GZbyMfWYxeNQMjE扣减库存
2025-06-20 18:31:03.427	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:96
[24.160ms] [rows:1] SELECT * FROM `inventory` WHERE goods = 421 AND `inventory`.`deleted_at` IS NULL ORDER BY `inventory`.`id` LIMIT 1
2025-06-20 18:31:03.433	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:60
[5.719ms] [rows:1] UPDATE `inventory` SET `stocks`=stocks - 2 WHERE goods=421 AND stocks >= 2 AND `inventory`.`deleted_at` IS NULL
2025-06-20 18:31:03.446	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:78
[9.602ms] [rows:1] INSERT INTO `stockselldetail` (`order_sn`,`status`,`detail`) VALUES ('VrkJEC2GZbyMfWYxeNQMjE',1,'[{"Goods":421,"Num":2}]')
2025-06-20 18:33:56.235	[34mINFO[0m	app/app.go:150	start deregister service
2025-06-20 18:33:56.258	[34mINFO[0m	app/app.go:161	start cancel context
2025-06-20 18:33:56.270	[34mINFO[0m	rpcserver/server.go:186	[grpc] server stopped
2025-06-20 18:34:00.109	[34mINFO[0m	app/app.go:102	start server
2025-06-20 18:34:00.109	[34mINFO[0m	rpcserver/server.go:177	[grpc] server listening on: 192.168.5.52:8018
2025-06-20 18:34:27.264	[34mINFO[0m	v1/inventory.go:143	订单RkdBF4xHZqL2MGDG6SigkD扣减库存
2025-06-20 18:34:27.291	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:96
[16.472ms] [rows:1] SELECT * FROM `inventory` WHERE goods = 421 AND `inventory`.`deleted_at` IS NULL ORDER BY `inventory`.`id` LIMIT 1
2025-06-20 18:34:27.300	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:60
[8.419ms] [rows:1] UPDATE `inventory` SET `stocks`=stocks - 2 WHERE goods=421 AND stocks >= 2 AND `inventory`.`deleted_at` IS NULL
2025-06-20 18:34:27.305	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:78
[3.978ms] [rows:1] INSERT INTO `stockselldetail` (`order_sn`,`status`,`detail`) VALUES ('RkdBF4xHZqL2MGDG6SigkD',1,'[{"Goods":421,"Num":2}]')
2025-06-20 18:34:27.340	[34mINFO[0m	v1/inventory.go:64	订单RkdBF4xHZqL2MGDG6SigkD归还库存
2025-06-20 18:34:27.340	[34mINFO[0m	v1/inventory.go:60	订单RkdBF4xHZqL2MGDG6SigkD归还库存
2025-06-20 18:34:27.343	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:45
[1.863ms] [rows:1] SELECT * FROM `stockselldetail` WHERE order_sn = 'RkdBF4xHZqL2MGDG6SigkD' ORDER BY `stockselldetail`.`order_sn` LIMIT 1
2025-06-20 18:34:27.343	[34mINFO[0m	v1/inventory.go:96	订单RkdBF4xHZqL2MGDG6SigkD库存记录已经归还，忽略
2025-06-20 18:34:36.457	[34mINFO[0m	v1/inventory.go:143	订单扣减库存
2025-06-20 18:34:36.469	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:96
[9.985ms] [rows:1] SELECT * FROM `inventory` WHERE goods = 421 AND `inventory`.`deleted_at` IS NULL ORDER BY `inventory`.`id` LIMIT 1
2025-06-20 18:34:36.472	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:60
[2.684ms] [rows:1] UPDATE `inventory` SET `stocks`=stocks - 2 WHERE goods=421 AND stocks >= 2 AND `inventory`.`deleted_at` IS NULL
2025-06-20 18:34:36.481	[34mINFO[0m	gormx/gmicro_logger.go:86	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:78 Error 1062 (23000): Duplicate entry '' for key 'stockselldetail.idx_order_sn'
[8.305ms] [rows:0] INSERT INTO `stockselldetail` (`order_sn`,`status`,`detail`) VALUES ('',1,'[{"Goods":421,"Num":2}]')
2025-06-20 18:34:36.487	[31mERROR[0m	v1/inventory.go:200	订单创建库存扣减记录失败
2025-06-20 18:35:26.296	[34mINFO[0m	app/app.go:150	start deregister service
2025-06-20 18:35:26.305	[34mINFO[0m	app/app.go:161	start cancel context
2025-06-20 18:35:26.315	[34mINFO[0m	rpcserver/server.go:186	[grpc] server stopped
2025-06-20 18:35:32.899	[34mINFO[0m	app/app.go:102	start server
2025-06-20 18:35:32.900	[34mINFO[0m	rpcserver/server.go:177	[grpc] server listening on: 192.168.5.52:8018
2025-06-20 18:36:50.833	[34mINFO[0m	v1/inventory.go:143	订单VuKYJ7ZjANS9Yq3X4Bfwy8扣减库存
2025-06-20 18:36:51.063	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:96
[9.777ms] [rows:1] SELECT * FROM `inventory` WHERE goods = 421 AND `inventory`.`deleted_at` IS NULL ORDER BY `inventory`.`id` LIMIT 1
2025-06-20 18:36:51.066	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:60
[2.943ms] [rows:1] UPDATE `inventory` SET `stocks`=stocks - 2 WHERE goods=421 AND stocks >= 2 AND `inventory`.`deleted_at` IS NULL
2025-06-20 18:36:51.070	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:78
[2.462ms] [rows:1] INSERT INTO `stockselldetail` (`order_sn`,`status`,`detail`) VALUES ('VuKYJ7ZjANS9Yq3X4Bfwy8',1,'[{"Goods":421,"Num":2}]')
2025-06-20 18:36:51.091	[34mINFO[0m	v1/inventory.go:64	订单VuKYJ7ZjANS9Yq3X4Bfwy8归还库存
2025-06-20 18:36:51.091	[34mINFO[0m	v1/inventory.go:60	订单VuKYJ7ZjANS9Yq3X4Bfwy8归还库存
2025-06-20 18:36:51.094	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:45
[1.654ms] [rows:1] SELECT * FROM `stockselldetail` WHERE order_sn = 'VuKYJ7ZjANS9Yq3X4Bfwy8' ORDER BY `stockselldetail`.`order_sn` LIMIT 1
2025-06-20 18:36:51.094	[34mINFO[0m	v1/inventory.go:96	订单VuKYJ7ZjANS9Yq3X4Bfwy8库存记录已经归还，忽略
2025-06-20 18:38:25.350	[34mINFO[0m	app/app.go:150	start deregister service
2025-06-20 18:38:25.359	[34mINFO[0m	app/app.go:161	start cancel context
2025-06-20 18:38:25.360	[34mINFO[0m	rpcserver/server.go:186	[grpc] server stopped
2025-06-20 18:38:28.267	[34mINFO[0m	app/app.go:102	start server
2025-06-20 18:38:28.268	[34mINFO[0m	rpcserver/server.go:177	[grpc] server listening on: 192.168.5.52:8018
2025-06-20 18:40:21.384	[34mINFO[0m	v1/inventory.go:143	订单TmQdeysvypY94a77RukcYb扣减库存
2025-06-20 18:40:21.421	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:96
[14.429ms] [rows:1] SELECT * FROM `inventory` WHERE goods = 421 AND `inventory`.`deleted_at` IS NULL ORDER BY `inventory`.`id` LIMIT 1
2025-06-20 18:40:21.426	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:60
[5.242ms] [rows:1] UPDATE `inventory` SET `stocks`=stocks - 2 WHERE goods=421 AND stocks >= 2 AND `inventory`.`deleted_at` IS NULL
2025-06-20 18:40:21.434	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:78
[5.467ms] [rows:1] INSERT INTO `stockselldetail` (`order_sn`,`status`,`detail`) VALUES ('TmQdeysvypY94a77RukcYb',1,'[{"Goods":421,"Num":2}]')
2025-06-20 18:40:21.464	[34mINFO[0m	v1/inventory.go:64	订单TmQdeysvypY94a77RukcYb归还库存
2025-06-20 18:40:21.465	[34mINFO[0m	v1/inventory.go:60	订单TmQdeysvypY94a77RukcYb归还库存
2025-06-20 18:40:21.472	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:45
[4.814ms] [rows:1] SELECT * FROM `stockselldetail` WHERE order_sn = 'TmQdeysvypY94a77RukcYb' ORDER BY `stockselldetail`.`order_sn` LIMIT 1
2025-06-20 18:40:21.474	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:96
[2.236ms] [rows:1] SELECT * FROM `inventory` WHERE goods = 421 AND `inventory`.`deleted_at` IS NULL ORDER BY `inventory`.`id` LIMIT 1
2025-06-20 18:40:21.478	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:68
[3.899ms] [rows:1] UPDATE `inventory` SET `stocks`=stocks + 2 WHERE goods=421 AND `inventory`.`deleted_at` IS NULL
2025-06-20 18:40:21.481	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:26
[2.072ms] [rows:1] UPDATE `stockselldetail` SET `status`=2 WHERE order_sn = 'TmQdeysvypY94a77RukcYb'
2025-06-20 19:16:33.721	[34mINFO[0m	app/app.go:150	start deregister service
2025-06-20 19:16:33.747	[34mINFO[0m	app/app.go:161	start cancel context
2025-06-20 19:16:33.751	[34mINFO[0m	rpcserver/server.go:186	[grpc] server stopped
2025-06-20 19:16:37.045	[34mINFO[0m	app/app.go:102	start server
2025-06-20 19:16:37.045	[34mINFO[0m	rpcserver/server.go:177	[grpc] server listening on: 192.168.5.52:8018
2025-06-20 19:17:45.081	[34mINFO[0m	v1/inventory.go:143	订单4xmRSVKSQrPPfxnVeNhGyZ扣减库存
2025-06-20 19:17:45.189	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:96
[64.200ms] [rows:1] SELECT * FROM `inventory` WHERE goods = 421 AND `inventory`.`deleted_at` IS NULL ORDER BY `inventory`.`id` LIMIT 1
2025-06-20 19:17:45.203	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:60
[13.756ms] [rows:1] UPDATE `inventory` SET `stocks`=stocks - 2 WHERE goods=421 AND stocks >= 2 AND `inventory`.`deleted_at` IS NULL
2025-06-20 19:17:45.213	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:78
[6.182ms] [rows:1] INSERT INTO `stockselldetail` (`order_sn`,`status`,`detail`) VALUES ('4xmRSVKSQrPPfxnVeNhGyZ',1,'[{"Goods":421,"Num":2}]')
2025-06-20 19:17:45.245	[34mINFO[0m	v1/inventory.go:64	订单4xmRSVKSQrPPfxnVeNhGyZ归还库存
2025-06-20 19:17:45.245	[34mINFO[0m	v1/inventory.go:60	订单4xmRSVKSQrPPfxnVeNhGyZ归还库存
2025-06-20 19:17:45.252	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:45
[4.715ms] [rows:1] SELECT * FROM `stockselldetail` WHERE order_sn = '4xmRSVKSQrPPfxnVeNhGyZ' ORDER BY `stockselldetail`.`order_sn` LIMIT 1
2025-06-20 19:17:45.255	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:96
[2.111ms] [rows:1] SELECT * FROM `inventory` WHERE goods = 421 AND `inventory`.`deleted_at` IS NULL ORDER BY `inventory`.`id` LIMIT 1
2025-06-20 19:17:45.258	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:68
[3.189ms] [rows:1] UPDATE `inventory` SET `stocks`=stocks + 2 WHERE goods=421 AND `inventory`.`deleted_at` IS NULL
2025-06-20 19:17:45.262	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:26
[3.423ms] [rows:1] UPDATE `stockselldetail` SET `status`=2 WHERE order_sn = '4xmRSVKSQrPPfxnVeNhGyZ'
2025-06-20 19:19:18.662	[34mINFO[0m	app/app.go:150	start deregister service
2025-06-20 19:19:18.672	[34mINFO[0m	app/app.go:161	start cancel context
2025-06-20 19:19:18.673	[34mINFO[0m	rpcserver/server.go:186	[grpc] server stopped
2025-06-20 19:19:26.919	[34mINFO[0m	app/app.go:102	start server
2025-06-20 19:19:26.919	[34mINFO[0m	rpcserver/server.go:177	[grpc] server listening on: 192.168.5.52:8018
2025-06-20 19:19:38.748	[34mINFO[0m	v1/inventory.go:143	订单tbLLU3ubRa4Dvyx2cxFuAV扣减库存
2025-06-20 19:19:38.780	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:96
[13.295ms] [rows:1] SELECT * FROM `inventory` WHERE goods = 421 AND `inventory`.`deleted_at` IS NULL ORDER BY `inventory`.`id` LIMIT 1
2025-06-20 19:19:38.784	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:60
[3.690ms] [rows:1] UPDATE `inventory` SET `stocks`=stocks - 2 WHERE goods=421 AND stocks >= 2 AND `inventory`.`deleted_at` IS NULL
2025-06-20 19:19:38.789	[34mINFO[0m	gormx/gmicro_logger.go:101	/root/repos/github.com/WeiXinao/daily_your_go/app/inventory/srv/internal/data/v1/db/inventory.go:78
[4.073ms] [rows:1] INSERT INTO `stockselldetail` (`order_sn`,`status`,`detail`) VALUES ('tbLLU3ubRa4Dvyx2cxFuAV',1,'[{"Goods":421,"Num":2}]')
2025-06-22 16:43:20.132	[34mINFO[0m	app/app.go:102	start server
2025-06-22 16:43:20.133	[34mINFO[0m	rpcserver/server.go:177	[grpc] server listening on: 192.168.5.52:8018
